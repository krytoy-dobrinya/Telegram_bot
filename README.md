# ü§ñ –°–ë–≠–£ Telegram Bot

**–ë–æ—Ç –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–ª—É—á–∞–π–Ω—ã—Ö –º–µ–º–æ–≤ ("—Å–º–µ—à–Ω—è–≤–æ–∫") –∏ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ "–ª—É—Ç–∞" –∏–∑ –∏–≥—Ä—ã Escape from Tarkov**

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–ª—É—á–∞–π–Ω—ã—Ö –º–µ–º–æ–≤ –ø–æ –∫–æ–º–∞–Ω–¥–µ `/—Å–º–µ—à–Ω—è–≤–∞`
- –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è "–ª—É—Ç–∞" –∏–∑ –∏–≥—Ä—ã –ø–æ –∫–æ–º–∞–Ω–¥–µ `/–ª—É—Ç`
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö PostgreSQL –ø–æ –∫–æ–º–∞–Ω–¥–µ `/–±–∞–∑–∞`
- –í—ã–≤–æ–¥ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö 10 —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –æ–±—Ä–∞—Ç–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ –ø–æ –∫–æ–º–∞–Ω–¥–µ `/re_chat`
- –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∏ –¥–∞–µ—Ç –∫–Ω–æ–ø–∫—É –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –≤ –í–ö `/auth`
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä—É—Å—Å–∫–æ–≥–æ —è–∑—ã–∫–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞

## –§–∞–π–ª–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞

<pre>
.
‚îú‚îÄ‚îÄ .env                     # –§–∞–π–ª —Å –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–º–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è (—Ç–æ–∫–µ–Ω—ã, –¥–æ—Å—Ç—É–ø—ã –∫ –ë–î)
‚îú‚îÄ‚îÄ .gitignore               # –°–ø–∏—Å–æ–∫ –∏–≥–Ω–æ—Ä–∏—Ä—É–µ–º—ã—Ö Git —Ñ–∞–π–ª–æ–≤ (env, –∫—ç—à –∏ —Ç.–¥.)
‚îú‚îÄ‚îÄ alembic.ini              # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Alembic –¥–ª—è –º–∏–≥—Ä–∞—Ü–∏–π –ë–î
‚îú‚îÄ‚îÄ docker-compose.yaml      # –û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤ (PostgreSQL + –±–æ—Ç + Alembic)
‚îú‚îÄ‚îÄ Dockerfile               # –°–±–æ—Ä–∫–∞ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –æ–±—Ä–∞–∑–∞ –±–æ—Ç–∞
‚îú‚îÄ‚îÄ Dockerfile.alembic       # –°–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–∞ –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–π
‚îú‚îÄ‚îÄ Dockerfile.server        # –°–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å–µ—Ä–≤–µ—Ä–∞
‚îú‚îÄ‚îÄ requirements.txt         # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Python (aiogram, SQLAlchemy –∏ –¥—Ä.)
‚îî‚îÄ‚îÄ app/
    ‚îú‚îÄ‚îÄ alembic/             # –ü–∞–ø–∫–∞ –º–∏–≥—Ä–∞—Ü–∏–π Alembic
    ‚îÇ   ‚îú‚îÄ‚îÄ versions/        # –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –º–∏–≥—Ä–∞—Ü–∏–π (–≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ë–î)
    ‚îÇ   ‚îú‚îÄ‚îÄ env.py           # –°–∫—Ä–∏–ø—Ç –æ–∫—Ä—É–∂–µ–Ω–∏—è Alembic
    ‚îÇ   ‚îî‚îÄ‚îÄ script.py.mako   # –®–∞–±–ª–æ–Ω –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –º–∏–≥—Ä–∞—Ü–∏–π
    ‚îú‚îÄ‚îÄ commands.py          # –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–æ–º–∞–Ω–¥ –±–æ—Ç–∞ (/start, /help –∏ –∫–∞—Å—Ç–æ–º–Ω—ã–µ)
    ‚îú‚îÄ‚îÄ config.py            # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (–ø—É—Ç–∏, —Ñ—Ä–∞–∑—ã, –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ë–î)
    ‚îú‚îÄ‚îÄ database.py          # –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ PostgreSQL (–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ)
    ‚îú‚îÄ‚îÄ main.py              # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ (–∑–∞–ø—É—Å–∫ –±–æ—Ç–∞, –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ middleware)
    ‚îú‚îÄ‚îÄ middlewares.py       # –ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω–æ–µ –ü–û (—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π, –∏–Ω–∂–µ–∫—Ç —Å–µ—Å—Å–∏–π –ë–î)
    ‚îú‚îÄ‚îÄ models.py            # SQLAlchemy-–º–æ–¥–µ–ª–∏ (User, Message)
    ‚îú‚îÄ‚îÄ server.py            # –°–µ—Ä–≤–µ—Ä –¥–ª—è —Ä–∞–±–æ—Ç—ã –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –≤ –í–ö
    ‚îú‚îÄ‚îÄ auth.html            # –û–∫–Ω–æ –ø–æ—è–≤–ª—è—é—â–µ–µ—Å—è –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –≤ –í–ö
    ‚îî‚îÄ‚îÄ images/              # –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –º–µ–¥–∏–∞—Ñ–∞–π–ª–æ–≤ (–º–µ–º—ã, loot-–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è)
</pre>

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

  - aiogram - —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è Telegram –±–æ—Ç–æ–≤
  - SQLAlchemy - —Ä–∞–±–æ—Ç–∞ —Å PostgreSQL
  - asyncpg - –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –¥—Ä–∞–π–≤–µ—Ä PostgreSQL
  - python-dotenv - –∑–∞–≥—Ä—É–∑–∫–∞ .env —Ñ–∞–π–ª–æ–≤
  - Alembic - –º–∏–≥—Ä–∞—Ü–∏–∏ –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

–î–æ–±–∞–≤–∏—Ç—å .env —Ñ–∞–π–ª –≤ –∫–æ—Ä–Ω–µ–≤—É—é –ø–∞–ø–∫—É

–ü—Ä–∏–º–µ—Ä –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è .env —Ñ–∞–π–ª–∞
```
BOT_TOKEN = –¢–æ–∫–µ–Ω –¢–ì-–±–æ—Ç–∞
GPT_TOKEN = –¢–æ–∫–µ–Ω ChatGPT
POSTGRES_USER = –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –ë–î
POSTGRES_PASSWORD = –ü–∞—Ä–æ–ª—å –≤ –ë–î
POSTGRES_HOST = –•–æ—Å—Ç –≤ –ë–î
POSTGRES_PORT = –ü–æ—Ä—Ç –≤ –ë–î
POSTGRES_DB = –ò–º—è –ë–î
PROXY_URL = –ü—Ä–æ–∫—Å–∏ (–µ—Å–ª–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è)
VK_CLIENT_ID = ID –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ –í–ö
VK_CLIENT_SECRET = –°–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á –æ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –í–ö
VK_REDIRECT_URI = –î–æ–≤–µ—Ä–µ–Ω–Ω—ã–π URI –æ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –í–ö
```

## –ó–∞–ø—É—Å–∫
```
docker-compose run alembic alembic upgrade head
docker-compose up --build
```

## –í—ã—Ö–æ–¥
```
docker-compose down -v
```
